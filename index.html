<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Ultimate Custom Progress Editor</title>
    <style>
        :root { --p: #00ff7b; }
        body { font-family: 'Segoe UI', sans-serif; background: #121212; color: white; display: flex; height: 100vh; margin: 0; overflow: hidden; }
        .settings { width: 380px; background: #1e1e1e; padding: 20px; border-right: 2px solid #333; box-shadow: 5px 0 20px rgba(0,0,0,0.5); overflow-y: auto; }
        .view { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: radial-gradient(circle, #222, #000); position: relative; }
        .control-group { margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        label { font-size: 11px; color: #888; text-transform: uppercase; font-weight: bold; display: block; margin-bottom: 5px; }
        input[type="text"], input[type="number"], input[type="range"] { width: 100%; padding: 8px; background: #2a2a2a; border: 1px solid #444; color: white; border-radius: 5px; box-sizing: border-box; }
        input[type="color"] { width: 100%; height: 35px; border: none; cursor: pointer; background: none; }
        .btn { width: 100%; padding: 15px; background: var(--p); border: none; border-radius: 8px; font-weight: bold; cursor: pointer; color: black; transition: 0.3s; text-transform: uppercase; margin-top: 10px; }
        .btn:hover { background: #00cc62; transform: translateY(-2px); }
        textarea { width: 100%; height: 100px; margin-top: 15px; background: #000; color: #0f0; border: 1px solid #333; font-family: monospace; font-size: 10px; padding: 8px; box-sizing: border-box; resize: none; }
        h3 { color: var(--p); margin: 0 0 20px 0; text-align: center; font-size: 18px; }
    </style>
</head>
<body>

<div class="settings">
    <h3>üõ† –ö–û–ù–°–¢–†–£–ö–¢–û–† –í–ò–î–ñ–ï–¢–ê</h3>
    
    <div class="control-group">
        <label>–°—Å—ã–ª–∫–∞ –Ω–∞ "–ê–∫—Ç–∏–≤–Ω—É—é" –∫–∞—Ä—Ç–∏–Ω–∫—É:</label>
        <input type="text" id="imgOn" value="https://raw.githubusercontent.com/koshe4ka194-hash/progress/main/bulbs/16.png" oninput="generate()">
    </div>

    <div class="control-group">
        <label>–°—Å—ã–ª–∫–∞ –Ω–∞ "–ü—É—Å—Ç—É—é" –∫–∞—Ä—Ç–∏–Ω–∫—É:</label>
        <input type="text" id="imgOff" value="https://raw.githubusercontent.com/koshe4ka194-hash/progress/main/bulbs/17.png" oninput="generate()">
    </div>

    <div class="control-group">
        <label>–¶–≤–µ—Ç –Ω–µ–æ–Ω–∞ –∏ –ø—É–ª—å—Å–∞—Ü–∏–∏:</label>
        <input type="color" id="clr" value="#00ff7b" oninput="generate()">
    </div>

    <div style="display: flex; gap: 10px;">
        <div class="control-group" style="flex:1;">
            <label>–ü—Ä–æ–≥—Ä–µ—Å—Å (0-5):</label>
            <input type="number" id="step" value="2" min="0" max="5" oninput="generate()">
        </div>
        <div class="control-group" style="flex:1;">
            <label>–ú–∞—Å—à—Ç–∞–±:</label>
            <input type="range" id="scale" min="0.5" max="1.5" step="0.1" value="1" oninput="generate()">
        </div>
    </div>

    <div class="control-group" style="display:flex; align-items:center; gap:10px;">
        <input type="checkbox" id="pulse" checked onchange="generate()" style="width:20px;">
        <label style="margin:0;">–≠—Ñ—Ñ–µ–∫—Ç –ø—É–ª—å—Å–∞—Ü–∏–∏</label>
    </div>

    <button class="btn" onclick="copy()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è Genially</button>
    <textarea id="output" readonly></textarea>
</div>

<div class="view" id="pv"></div>

<script>
    function generate() {
        const v = document.getElementById('step').value;
        const c = document.getElementById('clr').value;
        const sc = document.getElementById('scale').value;
        const isPulse = document.getElementById('pulse').checked;
        const on = document.getElementById('imgOn').value;
        const off = document.getElementById('imgOff').value;

        let itemsHtml = "";
        for(let i=1; i<=5; i++) {
            let isFull = i <= v;
            let currentImg = isFull ? on : off;
            let className = (isFull && isPulse) ? "pulse" : "";
            let opacity = isFull ? "1" : "0.2";
            let glow = isFull ? `filter: drop-shadow(0 0 10px ${c});` : "";
            
            itemsHtml += `<img src='${currentImg}' class='${className}' style='width:50px; height:50px; object-fit:contain; margin:0 5px; vertical-align:middle; opacity:${opacity}; ${glow}'>`;
        }

        const innerDoc = `
<!DOCTYPE html>
<html>
<head>
<style>
    @keyframes neonPulse {
        0% { filter: drop-shadow(0 0 5px ${c}); opacity: 0.8; transform: scale(1); }
        50% { filter: drop-shadow(0 0 18px ${c}); opacity: 1; transform: scale(1.05); }
        100% { filter: drop-shadow(0 0 5px ${c}); opacity: 0.8; transform: scale(1); }
    }
    body { margin: 0; padding: 0; overflow: hidden; display: flex; justify-content: center; align-items: center; background: transparent; height: 100vh; }
    .main-scale { transform: scale(${sc}); transform-origin: center; }
    .wrap {
        display: inline-flex; align-items: center; padding: 12px 25px;
        background: rgba(0,0,0,0.85); border: 3px solid ${c}; border-radius: 60px;
        box-shadow: 0 0 20px ${c}, inset 0 0 10px ${c};
        font-family: 'Arial Black', sans-serif; white-space: nowrap;
    }
    .pulse { animation: neonPulse 2s infinite ease-in-out; }
    .counter { margin-left: 20px; font-size: 28px; font-weight: bold; color: ${c}; text-shadow: 0 0 10px ${c}; }
</style>
</head>
<body>
    <div class='main-scale'>
        <div class='wrap'>
            <div style='display:flex; align-items:center;'>${itemsHtml}</div>
            <div class='counter'>${v} / 5</div>
        </div>
    </div>
</body>
</html>`.trim().replace(/\n/g, ' ');

        const iframeCode = `<iframe srcdoc="${innerDoc.replace(/"/g, '&quot;')}" style="width: 100%; height: 280px; border: none; background: transparent;" scrolling="no"></iframe>`;

        document.getElementById('pv').innerHTML = iframeCode;
        document.getElementById('output').value = iframeCode;
    }

    function copy() {
        const area = document.getElementById('output');
        area.select();
        document.execCommand('copy');
        alert("–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!");
    }
    
    generate();
</script>
</body>
</html>
