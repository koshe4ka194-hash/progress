<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Progress Bulbs Editor</title>

<style>
body {
  background:#111;
  color:#fff;
  font-family:Arial, sans-serif;
  padding:20px;
}
.wrapper {
  display:flex;
  gap:20px;
}
.panel {
  width:320px;
  background:#1e1e1e;
  padding:20px;
  border-radius:12px;
}
.panel h2 {
  margin-top:0;
}
.panel label {
  font-size:13px;
  display:block;
  margin-top:12px;
}
.panel input {
  width:100%;
  padding:6px;
  margin-top:4px;
}
.preview {
  flex:1;
  background:#000;
  border:2px dashed #444;
  display:flex;
  align-items:center;
  justify-content:center;
}
textarea {
  width:100%;
  height:180px;
  background:#000;
  color:#0f0;
  font-family:monospace;
  font-size:11px;
  margin-top:10px;
}
button {
  width:100%;
  margin-top:15px;
  padding:12px;
  background:#8c00ff;
  border:none;
  color:white;
  font-weight:bold;
  cursor:pointer;
  border-radius:8px;
}
.color-list div {
  display:flex;
  gap:6px;
  margin-top:6px;
}
</style>
</head>

<body>

<h1>üß™ Progress Bulbs Editor (Genially)</h1>

<div class="wrapper">

  <div class="panel">
    <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>

    <label>–ö–æ–ª-–≤–æ –∫–æ–ª–±</label>
    <input type="number" id="total" value="5" min="1" max="10">

    <label>–ó–∞–ø–æ–ª–Ω–µ–Ω–æ</label>
    <input type="number" id="filled" value="2" min="0">

    <label>–†–∞–∑–º–µ—Ä –∫–æ–ª–± (px)</label>
    <input type="number" id="size" value="40">

    <label>–¶–≤–µ—Ç —Ä–∞–º–∫–∏ (–Ω–µ–æ–Ω)</label>
    <input type="color" id="frameColor" value="#8c00ff">

    <label>GitHub –ø–∞–ø–∫–∞ —Å –∫–æ–ª–±–∞–º–∏</label>
    <input type="text" id="path"
      value="https://raw.githubusercontent.com/koshe4ka194-hash/progress/main/bulbs/">

    <label>–ü—É—Å—Ç–∞—è –∫–æ–ª–±–∞</label>
    <input type="text" id="emptyImg" value="bulb_empty.png">

    <label>–ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–∞—è –∫–æ–ª–±–∞</label>
    <input type="text" id="fullImg" value="bulb_full.png">

    <label>–¶–≤–µ—Ç–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∫–æ–ª–±</label>
    <div id="colors" class="color-list"></div>

    <button onclick="generate()">–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥</button>
    <textarea id="output" readonly></textarea>
  </div>

  <div class="preview" id="preview"></div>

</div>

<script>
function updateColors() {
  const filled = +document.getElementById('filled').value;
  const box = document.getElementById('colors');
  box.innerHTML = '';
  for (let i = 0; i < filled; i++) {
    box.innerHTML += `
      <div>
        <span>${i+1}</span>
        <input type="color" value="#00ffcc">
      </div>`;
  }
}

function generate() {
  const total = +totalEl.value;
  const filled = +filledEl.value;
  const size = sizeEl.value;
  const frame = frameColorEl.value;
  const path = pathEl.value;
  const empty = emptyImgEl.value;
  const full = fullImgEl.value;

  let bulbsHTML = '';
  const colors = document.querySelectorAll('#colors input');

  for (let i = 0; i < total; i++) {
    if (i < filled) {
      const c = colors[i]?.value || '#00ffcc';
      bulbsHTML += `<img src="${path}${full}" width="${size}"
      style="filter:drop-shadow(0 0 6px ${c});">`;
    } else {
      bulbsHTML += `<img src="${path}${empty}" width="${size}" style="opacity:0.4;">`;
    }
  }

  const final = `
<div style="
display:flex;
align-items:center;
gap:10px;
padding:12px 16px;
border:3px solid ${frame};
border-radius:40px;
box-shadow:0 0 20px ${frame};
background:transparent;
">
<div style="display:flex; gap:6px;">
${bulbsHTML}
</div>
<span style="
margin-left:10px;
font-size:20px;
font-weight:bold;
color:${frame};
text-shadow:0 0 10px ${frame};
">
${filled} / ${total}
</span>
</div>
`.trim();

  preview.innerHTML = final;
  output.value = final;
}

const totalEl = document.getElementById('total');
const filledEl = document.getElementById('filled');
const sizeEl = document.getElementById('size');
const frameColorEl = document.getElementById('frameColor');
const pathEl = document.getElementById('path');
const emptyImgEl = document.getElementById('emptyImg');
const fullImgEl = document.getElementById('fullImg');

document.querySelectorAll('input').forEach(i =>
  i.addEventListener('input', () => {
    updateColors();
    generate();
  })
);

updateColors();
generate();
</script>

</body>
</html>
