<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Редактор прогресс-бара для Genially</title>
<style>
  body {
    background: #111;
    color: white;
    font-family: sans-serif;
    padding: 20px;
  }
  .editor-wrap {
    display: flex;
    gap: 20px;
  }
  .sidebar {
    width: 300px;
    background: #222;
    padding: 20px;
    border-radius: 10px;
  }
  input, select {
    width: 100%;
    margin-bottom: 15px;
    padding: 8px;
    box-sizing: border-box;
    background: #000;
    color: #0f0;
    border: 1px solid #555;
  }
  button {
    width: 100%;
    padding: 12px;
    background: #8c00ff;
    border: none;
    color: white;
    font-weight: bold;
    cursor: pointer;
    margin-bottom: 10px;
  }
  #out {
    width: 100%;
    height: 150px;
    background: #000;
    color: #0f0;
    font-family: monospace;
    font-size: 12px;
    resize: none;
  }
  .preview-zone {
    flex-grow: 1;
    border: 2px dashed #444;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0,0,0,0.3);
    min-height: 120px;
  }
</style>
</head>
<body>

<div class="editor-wrap">
  <div class="sidebar">
    <h3>Настройки прогресс-бара</h3>
    <label>Папка с колбами (GitHub Pages):</label>
    <input type="text" id="folder" value="https://koshe4ka194-hash.github.io/progress/bulbs/" oninput="gen()">

    <label>Пустая колба (имя файла):</label>
    <input type="text" id="empty" value="17.png" oninput="gen()">

    <label>Заполненная колба (имя файла):</label>
    <input type="text" id="full" value="16.png" oninput="gen()">

    <label>Количество колб:</label>
    <input type="number" id="total" value="5" min="1" max="20" oninput="gen()">

    <label>Заполнено колб:</label>
    <input type="number" id="filled" value="2" min="0" max="20" oninput="gen()">

    <label>Цвет рамки:</label>
    <input type="color" id="borderColor" value="#8c00ff" oninput="gen()">

    <button onclick="copyCode()">Получить код</button>
    <textarea id="out" readonly></textarea>
  </div>

  <div class="preview-zone" id="preview"></div>
</div>

<script>
function gen() {
  const folder = document.getElementById('folder').value.trim();
  const empty = document.getElementById('empty').value.trim();
  const full = document.getElementById('full').value.trim();
  const total = parseInt(document.getElementById('total').value);
  let filled = parseInt(document.getElementById('filled').value);
  const border = document.getElementById('borderColor').value;

  if(filled > total) filled = total;
  if(filled < 0) filled = 0;

  // Генерация Genially-совместимого HTML через таблицу
  let html = `<table cellpadding="0" cellspacing="0" border="0" style="background-color: rgba(0,0,0,0); border:3px solid ${border}; border-radius:40px;">
<tr>`;

  // Генерируем каждую колбу в отдельной <td>
  for(let i=0;i<total;i++){
    if(i<filled){
      html += `<td style="padding:0 6px 0 0;"><img src="${folder}${full}" width="61"></td>`;
    } else {
      html += `<td style="padding:0 6px 0 0;"><img src="${folder}${empty}" width="61" style="opacity:0.4;"></td>`;
    }
  }

  // Добавляем текст с прогрессом
  html += `<td style="padding-left:10px; font-size:20px; font-weight:bold; color:${border}; text-shadow:0 0 10px ${border};">
${filled} / ${total}</td>`;

  html += `</tr></table>`;

  document.getElementById('preview').innerHTML = html;
  document.getElementById('out').value = html;
}

// Кнопка копирования кода
function copyCode(){
  const out = document.getElementById('out');
  out.select();
  document.execCommand('copy');
  alert("Код скопирован!");
}

gen();
</script>
</body>
</html>
