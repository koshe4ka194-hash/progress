<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Science Quiz Widget Editor</title>
    <style>
        body { font-family: sans-serif; background: #1a1a1a; color: white; display: flex; gap: 20px; padding: 20px; }
        .controls { width: 350px; background: #2a2a2a; padding: 20px; border-radius: 15px; }
        .preview-area { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: url('https://www.transparenttextures.com/patterns/carbon-fibre.png'); border-radius: 15px; border: 2px dashed #444; }
        
        /* Стили виджета */
        #widget-preview {
            display: flex;
            align-items: center;
            padding: 15px;
            border-radius: 50px;
            background: transparent;
            transition: all 0.3s;
        }
        .flask-img { height: 50px; margin-right: 10px; }
        .progress-track {
            width: 200px;
            height: 20px;
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .progress-fill { height: 100%; transition: width 0.5s; }
        .counter { margin-left: 15px; font-weight: bold; font-family: 'Courier New', monospace; font-size: 20px; }
        
        textarea { width: 100%; height: 100px; margin-top: 10px; background: #000; color: #0f0; border: 1px solid #444; font-size: 12px; }
        input, select { width: 100%; margin-bottom: 15px; }
        label { display: block; font-size: 12px; margin-bottom: 5px; color: #aaa; }
        button { background: #00d2ff; border: none; padding: 10px; width: 100%; border-radius: 5px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

<div class="controls">
    <h3>Настройки Виджета</h3>
    
    <label>Цвет неона (рамка)</label>
    <input type="color" id="neonColor" value="#00ff00" oninput="update()">
    
    <label>Цвет жидкости</label>
    <input type="color" id="liquidColor" value="#ccff00" oninput="update()">
    
    <label>Всего колб (вопросов)</label>
    <input type="number" id="total" value="5" min="1" oninput="update()">
    
    <label>Заполнено сейчас</label>
    <input type="number" id="current" value="2" min="0" oninput="update()">
    
    <label>Имя файла колбы в GitHub</label>
    <input type="text" id="fileName" value="flask.png" placeholder="flask.png" oninput="update()">

    <button onclick="generateCode()">ПОЛУЧИТЬ КОД ДЛЯ GENIALLY</button>
    <textarea id="outputCode" readonly></textarea>
</div>

<div class="preview-area">
    <div id="widget-preview">
        <img id="p-flask" src="" class="flask-img" alt="flask">
        <div class="progress-track" id="p-track">
            <div class="progress-fill" id="p-fill"></div>
        </div>
        <div class="counter" id="p-count">0/5</div>
    </div>
    <p style="color: #666; margin-top: 20px;">Предпросмотр на темном фоне</p>
</div>

<script>
    const user = "koshe4ka194-hash";
    const repo = "progress";

    function update() {
        const neon = document.getElementById('neonColor').value;
        const liquid = document.getElementById('liquidColor').value;
        const total = document.getElementById('total').value;
        const current = document.getElementById('current').value;
        const file = document.getElementById('fileName').value;
        
        const percent = (current / total) * 100;
        const imgUrl = `https://raw.githubusercontent.com/${user}/${repo}/main/${file}`;

        // Обновляем превью
        const preview = document.getElementById('widget-preview');
        preview.style.boxShadow = `0 0 15px ${neon}, inset 0 0 5px ${neon}`;
        preview.style.border = `2px solid ${neon}`;
        
        document.getElementById('p-flask').src = imgUrl;
        document.getElementById('p-fill').style.width = percent + "%";
        document.getElementById('p-fill').style.backgroundColor = liquid;
        document.getElementById('p-fill').style.boxShadow = `0 0 10px ${liquid}`;
        document.getElementById('p-count').innerText = `${current}/${total}`;
        document.getElementById('p-count').style.color = liquid;
    }

    function generateCode() {
        const previewHtml = document.querySelector('.preview-area').innerHTML;
        const finalCode = `<div style="display: flex; justify-content: center; align-items: center; height: 100vh;">
    ${document.getElementById('widget-preview').outerHTML}
</div>
<style>
    body { margin: 0; overflow: hidden; background: transparent; }
    .flask-img { height: 50px; margin-right: 10px; }
    .progress-track { width: 200px; height: 20px; border-radius: 10px; background: rgba(255,255,255,0.1); position: relative; overflow: hidden; border: 1px solid rgba(255,255,255,0.2); }
    .progress-fill { height: 100%; transition: width 0.5s; }
    .counter { margin-left: 15px; font-weight: bold; font-family: sans-serif; font-size: 20px; }
</style>`;
        document.getElementById('outputCode').value = finalCode;
    }

    update();
</script>
</body>
</html>
