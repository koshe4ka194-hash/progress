<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Genially Lab Progress Editor</title>
    <style>
        :root { --p: #00ff7b; }
        body { font-family: 'Segoe UI', sans-serif; background: #121212; color: white; display: flex; height: 100vh; margin: 0; }
        .settings { width: 350px; background: #1e1e1e; padding: 25px; border-right: 2px solid #333; box-shadow: 5px 0 20px rgba(0,0,0,0.5); }
        .view { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: radial-gradient(circle, #222, #000); position: relative; }
        .view::after { content: "–ü–†–ï–î–ü–†–û–°–ú–û–¢–† –í GENIALLY"; position: absolute; bottom: 30px; color: #444; font-size: 12px; letter-spacing: 2px; }
        input { width: 100%; margin: 10px 0 20px; padding: 10px; background: #2a2a2a; border: 1px solid #444; color: white; border-radius: 8px; box-sizing: border-box; }
        .btn { width: 100%; padding: 15px; background: var(--p); border: none; border-radius: 8px; font-weight: bold; cursor: pointer; color: black; transition: 0.3s; }
        .btn:hover { background: #00cc62; transform: translateY(-2px); }
        textarea { width: 100%; height: 150px; margin-top: 20px; background: #000; color: #0f0; border: 1px solid #333; font-family: monospace; font-size: 11px; padding: 10px; box-sizing: border-box; resize: none; }
        label { font-size: 12px; color: #888; text-transform: uppercase; }
        h3 { color: var(--p); margin-top: 0; text-align: center; }
    </style>
</head>
<body>

<div class="settings">
    <h3>üß™ –ö–û–ù–°–¢–†–£–ö–¢–û–† –ë–ê–†–ê</h3>
    
    <label>–¢–µ–∫—É—â–∏–π —à–∞–≥ (0-5):</label>
    <input type="number" id="step" value="2" min="0" max="5" oninput="generate()">
    
    <label>–¶–≤–µ—Ç –Ω–µ–æ–Ω–∞:</label>
    <input type="color" id="clr" value="#00ff7b" oninput="generate()">
    
    <label>–†–∞–∑–º–µ—Ä –∫–æ–ª–± (px):</label>
    <input type="number" id="size" value="50" oninput="generate()">

    <button class="btn" onclick="copy()">–ö–û–ü–ò–†–û–í–ê–¢–¨ –ö–û–î –î–õ–Ø GENIALLY</button>
    <textarea id="output" readonly></textarea>
</div>

<div class="view" id="pv"></div>

<script>
    function generate() {
        const v = document.getElementById('step').value;
        const c = document.getElementById('clr').value;
        const s = document.getElementById('size').value;
        
        const imgFull = "https://raw.githubusercontent.com/koshe4ka194-hash/progress/main/bulbs/16.png";
        const imgEmpty = "https://raw.githubusercontent.com/koshe4ka194-hash/progress/main/bulbs/17.png";

        let bulbsHtml = "";
        for(let i=1; i<=5; i++) {
            let isFull = i <= v;
            let currentImg = isFull ? imgFull : imgEmpty;
            let opacity = isFull ? "1" : "0.3";
            let glow = isFull ? `filter: drop-shadow(0 0 10px ${c});` : "";
            bulbsHtml += `<img src='${currentImg}' style='width:${s}px; height:auto; margin:0 5px; vertical-align:middle; opacity:${opacity}; ${glow}'>`;
        }

        // –§–æ—Ä–º–∏—Ä—É–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π HTML –¥–ª—è iframe
        const innerDoc = `
<!DOCTYPE html>
<html>
<head>
<style>
    body { margin: 0; padding: 20px; overflow: hidden; display: flex; justify-content: center; align-items: center; background: transparent; }
    .wrap {
        display: inline-flex; align-items: center; padding: 12px 25px;
        background: rgba(0,0,0,0.85); border: 3px solid ${c}; border-radius: 60px;
        box-shadow: 0 0 20px ${c}, inset 0 0 10px ${c};
        font-family: Arial, sans-serif; white-space: nowrap;
    }
    .counter { margin-left: 20px; font-size: ${s*0.6}px; font-weight: bold; color: ${c}; text-shadow: 0 0 10px ${c}; }
</style>
</head>
<body>
    <div class='wrap'>
        <div style='display:flex; align-items:center;'>${bulbsHtml}</div>
        <div class='counter'>${v} / 5</div>
    </div>
</body>
</html>`.trim().replace(/\n/g, ' ');

        const iframeCode = `<iframe srcdoc="${innerDoc.replace(/"/g, '&quot;')}" style="width: 100%; height: 180px; border: none; background: transparent;" scrolling="no"></iframe>`;

        document.getElementById('pv').innerHTML = iframeCode;
        document.getElementById('output').value = iframeCode;
    }

    function copy() {
        const area = document.getElementById('output');
        area.select();
        document.execCommand('copy');
        alert("–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω! –¢–µ–ø–µ—Ä—å –≤—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –≤ Genially —á–µ—Ä–µ–∑ Insert -> Others.");
    }
    
    generate();
</script>
</body>
</html>
